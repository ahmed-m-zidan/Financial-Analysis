<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>مؤشرات التحليل المالي (Financial Analysis Ratios)</title>
    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- Google Fonts -->
    <link href="https://fonts.googleapis.com/css2?family=Cairo:wght@400;600;700&family=Tajawal:wght@400;500;700&display=swap" rel="stylesheet">
    <!-- Font Awesome -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    
    <style>
        body { font-family: 'Tajawal', sans-serif; background-color: #f8fafc; }
        .term-title { font-family: 'Cairo', sans-serif; }
        ::-webkit-scrollbar { width: 4px; height: 4px; }
        ::-webkit-scrollbar-track { background: #f1f1f1; }
        ::-webkit-scrollbar-thumb { background: #cbd5e1; border-radius: 4px; }
        ::-webkit-scrollbar-thumb:hover { background: #94a3b8; }
        
        .card-hover { transition: all 0.3s ease; }
        .card-hover:hover { transform: translateY(-5px); box-shadow: 0 10px 25px -5px rgba(0, 0, 0, 0.1); }
        
        .filter-btn { transition: all 0.2s; }
        .filter-btn.active { background-color: #2563eb; color: white; border-color: #2563eb; }
        .filter-btn:hover:not(.active) { background-color: #eff6ff; color: #2563eb; }
        
        /* Formula Box Style */
        .formula-box {
            background-color: #f0f9ff;
            border: 1px dashed #bae6fd;
            font-family: 'Courier New', monospace;
            direction: ltr;
        }
    </style>
</head>
<body class="bg-slate-50 min-h-screen flex flex-col">

    <!-- Header Section -->
    <header class="bg-white shadow-sm border-b border-slate-200 sticky top-0 z-20">
        <div class="container mx-auto px-4 py-4">
            <div class="flex flex-col md:flex-row items-center justify-between gap-4 mb-4">
                <div class="flex items-center gap-3">
                    <div class="bg-blue-600 w-12 h-12 rounded-xl flex items-center justify-center text-white shadow-lg shadow-blue-200">
                        <i class="fa-solid fa-chart-pie text-2xl"></i>
                    </div>
                    <div>
                        <h1 class="text-xl md:text-2xl font-bold text-slate-800 term-title leading-tight">
                            مؤشرات التحليل المالي
                            <span class="block text-sm md:text-base font-normal text-slate-500 mt-1 dir-ltr" dir="ltr"> Financial Analysis Ratios </span>
                        </h1>
                    </div>
                </div>
                
                <div class="relative w-full md:w-80">
                    <input type="text" id="searchInput" placeholder="بحث عن مؤشر أو مصطلح..." 
                        class="w-full pr-10 pl-4 py-2.5 bg-slate-100 border-none rounded-xl text-slate-700 focus:ring-2 focus:ring-blue-500 transition-all outline-none text-sm placeholder-slate-400">
                    <i class="fa-solid fa-magnifying-glass absolute right-3 top-1/2 transform -translate-y-1/2 text-slate-400"></i>
                </div>
            </div>

            <!-- Categories / Filter Tabs -->
            <div class="flex gap-2 overflow-x-auto pb-4 pt-2" id="filterContainer">
                
                <button onclick="filterByCategory('all')" class="filter-btn active px-4 py-2 rounded-xl border border-slate-200 text-slate-600 bg-white flex flex-col items-center justify-center min-w-[80px] hover:shadow-md transition-all">
                    <span class="font-bold text-sm">الكل</span>
                    <span class="text-[10px] font-normal opacity-80">All</span>
                </button>

                <button onclick="filterByCategory('analysis')" class="filter-btn px-4 py-2 rounded-xl border border-slate-200 text-slate-600 bg-white flex flex-col items-center justify-center min-w-[110px] hover:shadow-md transition-all">
                    <span class="font-bold text-sm">أدوات التحليل</span>
                    <span class="text-[10px] font-normal opacity-80">Analysis Tools</span>
                </button>

                <div class="w-px bg-slate-300 mx-1 self-center h-8"></div> <!-- Separator -->

                <button onclick="filterByCategory('profitability')" class="filter-btn px-4 py-2 rounded-xl border border-slate-200 text-slate-600 bg-white flex flex-col items-center justify-center min-w-[120px] hover:shadow-md transition-all">
                    <span class="font-bold text-sm">نسب الربحية</span>
                    <span class="text-[10px] font-normal opacity-80">Profitability Ratios</span>
                </button>

                <button onclick="filterByCategory('efficiency')" class="filter-btn px-4 py-2 rounded-xl border border-slate-200 text-slate-600 bg-white flex flex-col items-center justify-center min-w-[110px] hover:shadow-md transition-all">
                    <span class="font-bold text-sm">نسب الكفاءة</span>
                    <span class="text-[10px] font-normal opacity-80">Efficiency Ratios</span>
                </button>

                <div class="w-px bg-slate-300 mx-1 self-center h-8"></div> <!-- Separator -->

                <button onclick="filterByCategory('financial_terms')" class="filter-btn px-4 py-2 rounded-xl border border-slate-200 text-slate-600 bg-white flex flex-col items-center justify-center min-w-[120px] hover:shadow-md transition-all">
                    <span class="font-bold text-sm">مصطلحات مالية</span>
                    <span class="text-[10px] font-normal opacity-80">Financial Terms</span>
                </button>

            </div>
        </div>
    </header>

    <!-- Main Content -->
    <main class="container mx-auto px-4 py-8 flex-grow">
        <div class="mb-6 flex items-center justify-between">
            <h2 id="sectionTitle" class="text-lg font-bold text-slate-800 term-title border-r-4 border-blue-500 pr-3">كل المصطلحات</h2>
            <span class="text-xs text-slate-500 bg-slate-100 px-3 py-1 rounded-full border border-slate-200">العدد: <span id="countTerms" class="font-bold text-slate-800">0</span></span>
        </div>

        <div id="cardsContainer" class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-5">
            <!-- Cards Injected Here -->
        </div>

        <div id="noResults" class="hidden flex-col items-center justify-center py-20 text-center">
            <div class="bg-slate-100 p-6 rounded-full mb-4">
                <i class="fa-solid fa-layer-group text-4xl text-slate-400"></i>
            </div>
            <h3 class="text-lg font-bold text-slate-700">لا توجد نتائج</h3>
        </div>
    </main>

    <!-- Footer -->
    <footer class="text-center text-slate-400 text-xs py-6 border-t border-slate-200 bg-white">
        <p>تم تجميع المصطلحات والنسب لغرض التعليم المالي</p>
    </footer>

    <script>
        const termsData = [
            // ================= مصطلحات مالية (مدمجة) =================
            // الكلمات العامة سابقاً
            { id: 1, term: "Determine", definition: "يُحَدِّد أو يقرر (مثل تحديد الصحة المالية).", category: "مصطلحات مالية", type: "financial_terms", color: "bg-slate-100 text-slate-600" },
            { id: 2, term: "Thorough", definition: "شامل أو دقيق (Thorough Analysis).", category: "مصطلحات مالية", type: "financial_terms", color: "bg-slate-100 text-slate-600" },
            { id: 3, term: "Surrounding", definition: "محيطة (الظروف المحيطة Surrounding circumstances).", category: "مصطلحات مالية", type: "financial_terms", color: "bg-slate-100 text-slate-600" },
            { id: 4, term: "Rising", definition: "يرتفع / صاعد (للأسعار أو الأرباح).", category: "مصطلحات مالية", type: "financial_terms", color: "bg-slate-100 text-slate-600" },
            { id: 5, term: "Falling", definition: "ينخفض / هابط.", category: "مصطلحات مالية", type: "financial_terms", color: "bg-slate-100 text-slate-600" },
            { id: 6, term: "Improving", definition: "يتحسن (تطور إيجابي).", category: "مصطلحات مالية", type: "financial_terms", color: "bg-slate-100 text-slate-600" },
            { id: 7, term: "Declining", definition: "يتراجع (انخفاض في الأداء).", category: "مصطلحات مالية", type: "financial_terms", color: "bg-slate-100 text-slate-600" },
            
            // القوائم والمصطلحات سابقاً (تم نقلها هنا)
            { id: 20, term: "Financial Health", definition: "الصحة المالية: الحالة العامة لاستقرار الشركة.", category: "مصطلحات مالية", type: "financial_terms", color: "bg-purple-100 text-purple-700" },
            { id: 21, term: "Intrinsic Value", definition: "القيمة الجوهرية: القيمة الحقيقية للسهم (العادلة).", category: "مصطلحات مالية", type: "financial_terms", color: "bg-purple-100 text-purple-700" },
            { id: 22, term: "Balance Sheet", definition: "الميزانية العمومية: أصول وخصوم الشركة في لحظة معينة.", category: "قوائم مالية", type: "financial_terms", color: "bg-orange-100 text-orange-700" },
            { id: 23, term: "Income Statement", definition: "قائمة الدخل: الإيرادات والمصروفات وصافي الربح.", category: "قوائم مالية", type: "financial_terms", color: "bg-orange-100 text-orange-700" },

            // ================= أدوات التحليل (Analysis Tools) =================
            { id: 10, term: "Technical Analysis", definition: "التحليل الفني: دراسة حركة الأسعار السابقة لتوقع المستقبل.", category: "أنواع التحليل", type: "analysis", color: "bg-indigo-100 text-indigo-700" },
            { id: 11, term: "Fundamental Analysis", definition: "التحليل الأساسي: تقييم القيمة الحقيقية للشركة بناءً على البيانات المالية.", category: "أنواع التحليل", type: "analysis", color: "bg-indigo-100 text-indigo-700" },
            { id: 12, term: "Vertical Analysis", definition: "التحليل الرأسي (Common-Size): تحويل الأرقام إلى نسب مئوية من الإجمالي لمقارنة الأحجام المختلفة.", category: "أدوات التحليل", type: "analysis", color: "bg-indigo-100 text-indigo-700" },
            
            { 
                id: 13, 
                term: "Horizontal Analysis", 
                definition: "التحليل الأفقي (Trend Analysis): مقارنة أداء الشركة عبر الزمن لتحديد الاتجاهات. يتم تطبيقه بطريقتين:\n\n1. معدلات النمو السنوي (Annual Growth Rates): حساب نسبة التغير لكل سنة مقارنة بالسنة السابقة مباشرة.\n\n2. سنة الأساس (Base Year): اختيار سنة مرجعية (تساوي 100%) ومقارنة كل السنوات اللاحقة بها.", 
                category: "أدوات التحليل", 
                type: "analysis", 
                color: "bg-indigo-100 text-indigo-700",
                formula: "<span class='text-xs text-slate-400 block mb-1'>1. Growth Rate Equation:</span>(Current - Previous) ÷ Previous<hr class='my-3 border-slate-200'><span class='text-xs text-slate-400 block mb-1'>2. Base Year Equation:</span>(Current ÷ Base Year) × 100",
                abbreviations: [
                    { key: "Base Year", full: "Reference Year", meaning: "سنة الأساس (المرجع = 100%)" },
                    { key: "CAGR", full: "Compound Annual Growth Rate", meaning: "معدل النمو السنوي المركب" }
                ]
            },
            // تم حذف بطاقات Annual Growth Rates و Base Year ودمجها في الأعلى

            // ================= نسب الربحية (Profitability Ratios) =================
            { 
                id: 101, 
                term: "Gross Profit Margin", 
                definition: "هامش مجمل الربح: الربح بعد خصم تكلفة الإنتاج فقط.\n\nهامش ربح إجمالي بين 50% و70% ممتاز لمعظم الأنشطة التي تبيع منتجات مثل المتاجر والمطاعم والمصانع.\n\nلكن في الأنشطة الخدمية مثل البنوك والمكاتب القانونية يعتبر 50% ضعيف لأن تكاليف الخدمة قليلة والطبيعي أن يكون الهامش أعلى.", 
                category: "نسب الربحية", 
                type: "profitability", 
                color: "bg-emerald-100 text-emerald-700", 
                formula: "(Net Sales - COGS) ÷ Net Sales",
                abbreviations: [
                    { key: "COGS", full: "Cost of Goods Sold", meaning: "تكلفة البضاعة المباعة" }
                ]
            },
            { 
                id: 102, 
                term: "Operating Profit Margin", 
                definition: "هامش الربح التشغيلي: الربح بعد خصم تكلفة البضاعة والمصاريف الإدارية والعمومية.", 
                category: "نسب الربحية", 
                type: "profitability", 
                color: "bg-emerald-100 text-emerald-700", 
                formula: "(Net Sales - COGS - SG&A) ÷ Net Sales",
                abbreviations: [
                    { key: "COGS", full: "Cost of Goods Sold", meaning: "تكلفة البضاعة المباعة" },
                    { key: "SG&A", full: "Selling, General & Admin", meaning: "مصاريف بيعية وإدارية" }
                ]
            },
            { id: 103, term: "Net Profit Margin", definition: "هامش صافي الربح: الربح النهائي لكل دولار مبيعات.", category: "نسب الربحية", type: "profitability", color: "bg-emerald-100 text-emerald-700", formula: "Net Profits ÷ Net Sales" },
            
            // --- الإضافات الجديدة (ROE & ROA) ---
            { 
                id: 104, 
                term: "Return on Assets (ROA)", 
                definition: "العائد على الأصول: يقيس كفاءة الشركة في استخدام أصولها لتوليد الأرباح.", 
                category: "نسب الربحية", 
                type: "profitability", 
                color: "bg-emerald-100 text-emerald-700", 
                formula: "Net Income ÷ Total Assets",
                abbreviations: [
                    { key: "ROA", full: "Return on Assets", meaning: "العائد على الأصول" }
                ]
            },
            { 
                id: 105, 
                term: "Return on Equity (ROE)", 
                definition: "العائد على حقوق الملكية: يقيس العائد الذي يحصل عليه المساهمون مقابل استثمارهم في الشركة.", 
                category: "نسب الربحية", 
                type: "profitability", 
                color: "bg-emerald-100 text-emerald-700", 
                formula: "Net Income ÷ Total Equity",
                abbreviations: [
                    { key: "ROE", full: "Return on Equity", meaning: "العائد على حقوق الملكية" }
                ]
            },

            // ================= نسب الكفاءة (Efficiency Ratios) =================
            { 
                id: 200, 
                term: "Tax Ratio", 
                definition: "نسبة الضرائب: النسبة الفعلية للضرائب التي تدفعها الشركة من دخلها.", 
                category: "نسب الكفاءة", 
                type: "efficiency", 
                color: "bg-teal-100 text-teal-700", 
                formula: "Tax expenses ÷ EBT",
                abbreviations: [
                    { key: "EBT", full: "Earnings Before Taxes", meaning: "الأرباح قبل الضرائب" }
                ]
            },
            
            { 
                id: 201, 
                term: "Total Asset Turnover Ratio", 
                definition: "معدل دوران الأصول: مؤشر على مدى كفاءة الشركة في استخدام أصولها لتوليد الإيرادات (Revenue).", 
                category: "نسب الكفاءة", 
                type: "efficiency", 
                color: "bg-teal-100 text-teal-700", 
                formula: "Net Sales ÷ Av. Total assets",
                abbreviations: [
                    { key: "Av. Assets", full: "(Beginning + Ending) ÷ 2", meaning: "متوسط الأصول = (أول المدة + آخر المدة) ÷ 2" }
                ]
            },
            
            { 
                id: 202, 
                term: "PP&E Turnover Ratio", 
                definition: "معدل دوران الأصول الثابتة: يوضح كم دولاراً من المبيعات تحققه الشركة مقابل كل دولار مستثمر في الممتلكات والمصانع والمعدات (PPE).", 
                category: "نسب الكفاءة", 
                type: "efficiency", 
                color: "bg-teal-100 text-teal-700", 
                formula: "Net Sales ÷ Av. PP&E",
                abbreviations: [
                    { key: "PP&E", full: "Property, Plant & Equipment", meaning: "ممتلكات ومصانع ومعدات" },
                    { key: "Av. PP&E", full: "(Beginning + Ending) ÷ 2", meaning: "متوسط الأصول الثابتة" }
                ]
            },

            // --- Inventory Ratios (Updated) ---
            { 
                id: 203, 
                term: "Inventory Turnover Ratio", 
                definition: "معدل دوران المخزون: يقيس مدى كفاءة الشركة في استخدام مخزونها (كم مرة تم بيع المخزون وتجديده خلال الفترة).", 
                category: "نسب الكفاءة", 
                type: "efficiency", 
                color: "bg-teal-100 text-teal-700", 
                formula: "COGS ÷ Av. Inventory",
                abbreviations: [
                    { key: "COGS", full: "Cost of Goods Sold", meaning: "تكلفة البضاعة المباعة" },
                    { key: "Av. Inventory", full: "Average Inventory", meaning: "متوسط المخزون" }
                ]
            },
            { 
                id: 204, 
                term: "Inventory Days Ratio", 
                definition: "متوسط فترة التخزين: متوسط عدد الأيام التي تستغرقها الشركة لتحويل مخزونها (بما في ذلك البضائع تحت التصنيع) إلى مبيعات.", 
                category: "نسب الكفاءة", 
                type: "efficiency", 
                color: "bg-teal-100 text-teal-700", 
                formula: "(Inventory × 365) ÷ Cost of Sales\nOR\nDays in year ÷ Inventory Turnover",
                abbreviations: [
                    { key: "Note", full: "Lower is generally better", meaning: "كلما قلت الأيام كان أفضل (بيع أسرع)" }
                ]
            },

            // --- Receivable Ratios (Updated) ---
            { 
                id: 205, 
                term: "Receivable Turnover Ratio", 
                definition: "معدل دوران الذمم المدينة: يوضح كفاءة الشركة في تحصيل الديون المستحقة عن المبيعات الآجلة (Credit Sales).", 
                category: "نسب الكفاءة", 
                type: "efficiency", 
                color: "bg-teal-100 text-teal-700", 
                formula: "Net Credit Sales ÷ Av. AR",
                abbreviations: [
                    { key: "AR", full: "Accounts Receivable", meaning: "الذمم المدينة (العملاء)" },
                    { key: "Av. AR", full: "Average Accounts Receivable", meaning: "متوسط الذمم المدينة" }
                ]
            },
            { 
                id: 206, 
                term: "Receivable Days Ratio", 
                definition: "متوسط فترة التحصيل: متوسط الوقت الذي يستغرقه العميل لسداد قيمة المنتجات أو الخدمات.\n\nتعتمد جودة هذه النسبة على نوع الصناعة وشروط الدفع واتجاهات الشركة السابقة.", 
                category: "نسب الكفاءة", 
                type: "efficiency", 
                color: "bg-teal-100 text-teal-700", 
                formula: "(AR × 365) ÷ Net Credit Sales\nOR\nDays in year ÷ Receivable Turnover",
                abbreviations: [
                    { key: "AR", full: "Accounts Receivable", meaning: "الذمم المدينة" }
                ]
            },

            // --- Payable Ratios (Updated with BASE Rule) ---
            { 
                id: 207, 
                term: "Accounts Payable Turnover", 
                definition: "معدل دوران الذمم الدائنة: يوضح عدد المرات التي تقوم فيها الشركة بسداد التزاماتها للموردين خلال فترة معينة.\n\nقاعدة (BASE) لحساب القيم المفقودة (مثل المشتريات):\nBeginning + Additions - Subtractions = Ending\n(الرصيد الافتتاحي + المشتريات - المدفوعات = الرصيد الختامي).", 
                category: "نسب الكفاءة", 
                type: "efficiency", 
                color: "bg-teal-100 text-teal-700", 
                formula: "Purchases ÷ Av. AP",
                abbreviations: [
                    { key: "AP", full: "Accounts Payable", meaning: "الذمم الدائنة (الموردين)" },
                    { key: "Av. AP", full: "Average Accounts Payable", meaning: "متوسط الذمم الدائنة" },
                    { key: "Purchases", full: "COGS + Ending Inv - Beg Inv", meaning: "المشتريات" }
                ]
            },
            { 
                id: 208, 
                term: "Payable Days Ratio", 
                definition: "متوسط فترة السداد: يقيس متوسط عدد الأيام التي تستغرقها الشركة لدفع مستحقات الموردين.", 
                category: "نسب الكفاءة", 
                type: "efficiency", 
                color: "bg-teal-100 text-teal-700", 
                formula: "Days in year ÷ Payable Turnover ratio" 
            },

            // --- Working Capital (Existing) ---
            { 
                id: 209, 
                term: "Working Capital", 
                definition: "رأس المال العامل: يقيس السيولة التشغيلية المتاحة لتغطية العمليات اليومية للشركة.", 
                category: "نسب الكفاءة", 
                type: "efficiency", 
                color: "bg-teal-100 text-teal-700", 
                formula: "Current Assets - Current Liabilities" 
            },

            // ================= نسب السيولة (Liquidity Ratios) - REMOVED =================
            // ================= نسب الملاءة (Solvency Ratios) - REMOVED =================
        ];

        const container = document.getElementById('cardsContainer');
        const searchInput = document.getElementById('searchInput');
        const noResults = document.getElementById('noResults');
        const countDisplay = document.getElementById('countTerms');
        const sectionTitle = document.getElementById('sectionTitle');
        let currentFilter = 'all';

        function speak(text) {
            if ('speechSynthesis' in window) {
                window.speechSynthesis.cancel();
                const utterance = new SpeechSynthesisUtterance(text);
                utterance.lang = 'en-US';
                window.speechSynthesis.speak(utterance);
            }
        }

        function createCard(item) {
            // Generate Formula Section
            const formulaHtml = item.formula ? `
                <div class="mt-3 pt-3 border-t border-dashed border-slate-200">
                    <div class="flex items-center gap-2 text-xs text-slate-500 mb-1">
                        <i class="fa-solid fa-calculator"></i>
                        <span>المعادلة:</span>
                    </div>
                    <div class="p-2 bg-slate-50 rounded border border-slate-200 text-center font-mono text-sm text-blue-700 dir-ltr font-bold tracking-tight" dir="ltr">
                        ${item.formula}
                    </div>
                </div>
            ` : '';

            // Generate Abbreviations Section
            let abbrevHtml = '';
            if (item.abbreviations && item.abbreviations.length > 0) {
                abbrevHtml = `<div class="mt-3 bg-amber-50 rounded-lg p-2 border border-amber-100">
                    <div class="flex items-center gap-1 text-[10px] text-amber-600 mb-1 font-bold">
                        <i class="fa-solid fa-circle-info"></i>
                        <span>مفتاح الاختصارات:</span>
                    </div>`;
                
                item.abbreviations.forEach(abbr => {
                    abbrevHtml += `
                        <div class="text-xs text-slate-700 flex flex-col mb-1 last:mb-0 border-b border-amber-100 pb-1 last:border-0 last:pb-0">
                            <div class="flex justify-between items-center dir-ltr" dir="ltr">
                                <span class="font-bold text-amber-700 font-mono">${abbr.key}</span>
                                <span class="text-[10px] text-slate-500">${abbr.full}</span>
                            </div>
                            <span class="text-[11px] text-right text-slate-600">${abbr.meaning}</span>
                        </div>
                    `;
                });
                abbrevHtml += `</div>`;
            }

            return `
                <div class="bg-white rounded-xl p-5 border border-slate-200 shadow-sm card-hover flex flex-col h-full relative group">
                    <div class="flex justify-between items-start mb-3">
                        <span class="px-2.5 py-1 rounded-md text-[10px] font-bold tracking-wide ${item.color}">
                            ${item.category}
                        </span>
                        <button onclick="speak('${item.term}')" 
                            class="w-8 h-8 rounded-full bg-slate-50 flex items-center justify-center text-slate-400 hover:bg-blue-600 hover:text-white transition-colors">
                            <i class="fa-solid fa-volume-high text-xs"></i>
                        </button>
                    </div>
                    
                    <h2 class="text-lg font-bold text-slate-800 mb-2 text-left dir-ltr font-[Cairo]" dir="ltr">
                        ${item.term}
                    </h2>
                    
                    <p class="text-slate-600 text-sm leading-relaxed flex-grow whitespace-pre-line">
                        ${item.definition}
                    </p>

                    ${formulaHtml}
                    ${abbrevHtml}
                </div>
            `;
        }

        function filterByCategory(type) {
            currentFilter = type;
            document.querySelectorAll('.filter-btn').forEach(btn => {
                btn.classList.remove('active');
                if(btn.getAttribute('onclick').includes(type)) btn.classList.add('active');
            });

            const titles = {
                'all': 'كل المصطلحات',
                'financial_terms': 'مصطلحات مالية عامة',
                'analysis': 'أدوات وأنواع التحليل',
                'profitability': 'نسب الربحية (Performance)',
                'efficiency': 'نسب الكفاءة (Performance)',
                'liquidity': 'نسب السيولة (Leverage)',
                'solvency': 'نسب الملاءة (Leverage)'
            };
            sectionTitle.innerText = titles[type] || 'المصطلحات';
            renderTerms(searchInput.value);
        }

        function renderTerms(searchText = '') {
            container.innerHTML = '';
            const filtered = termsData.filter(item => {
                const matchesSearch = item.term.toLowerCase().includes(searchText.toLowerCase()) || item.definition.includes(searchText);
                const matchesType = currentFilter === 'all' || item.type === currentFilter;
                return matchesSearch && matchesType;
            });

            countDisplay.innerText = filtered.length;
            if (filtered.length === 0) {
                noResults.classList.remove('hidden');
                noResults.classList.add('flex');
            } else {
                noResults.classList.add('hidden');
                noResults.classList.remove('flex');
                filtered.forEach(item => container.innerHTML += createCard(item));
            }
        }

        searchInput.addEventListener('input', (e) => renderTerms(e.target.value));
        renderTerms();
    </script>
</body>
</html>
